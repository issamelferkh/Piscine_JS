# Exercise 02 - ğŸªCookie NarağŸª's passport system!

|                      |                                         |
| :--------------------| --------------------------------------- |
| Folder name to submit: | ex02 |
| File name to be submitted: | All files needed for Express project |
| Available external modules: | express, jsonwebtoken, passport, passport-jwt, validator, dotenv, nodemon, [middleware supported by Expressjs team](http://expressjs.com/en/resources/middleware.html) |
| Note: | None |

Recently, â€˜Cookie Naraâ€™ has decided to use â€˜passport-jwtâ€™, which is used worldwide!

Please follow the instructions below to implement it!

### Constraints

- JWT SECRET KEY must not be written raw inside the code.
- You must set expiraton.
- Logic to classify authenticated users should be implemented as middleware.
- Inside the payload of jwt, there must be a `username` field.
- In the passport-jwt validation logic, payload should be injected into `rea.user`.
- Token delivery method uses `Bearer Authentication`.

> â„¹ï¸
> https://datatracker.ietf.org/doc/html/rfc6750

### API Specification

- **URL**
  `/passport`
- **Method**
  `GET`
- **Params**
  - None
- **Query**
  - None
- **Body**
  - None
- **Header**
  - `Authentication`
- **Cookies**
  - None
- When authentication is successful
  - body
    ```js
    // jwt payload
    /*
    {
      'exp': 4242424242
      'username': 'jaeskim'
    }
    */
    {
      "msg" : "ğŸª jaeskim, welcome to the world of cookies! ğŸª"
    }
    ```
- In case of wrong request
  - body
    ```js
    {
      "msg" : "ğŸª No one can enter the world of cookies!! ğŸª",
      "reason": [
        "???" // Add relevant error items.
      ]
    }
    ```

- **URL**
  `/passport`
- **Method**
  `POST`
- **Params**
  - None
- **Query**
  - None
- **Body** - *json*
  - username
    - type: string
- **Cookies**
  - None
- When issuance is successful
  - body
    ```json
    {
      "msg" : "ğŸª Passport issuance successful! ğŸª",
      "token" : "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjQyNDI0MjQyNDIsInVzZXJuYW1lIjoiamFlc2tpbSJ9.BMexiK1IQG8CQ8ckiI3kB3JsXArhZnAEZI0NFFYnCs4"
    }
    ```
- In case of wrong request
  - body
    ```js
    {
      "msg" : "ğŸª Passport issuance failed! ğŸª".
      "reason": [
        "???" // Add relevant error items.
      ]
    }
    ```
